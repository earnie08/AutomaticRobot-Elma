<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>My Project: Lifetime Security Guard Robot - Elma</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Lifetime Security Guard Robot - Elma </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Project Goal : </h2>
<p>A lifetime security guard robot wandering around on a 2D array map and helping you detect the intruder until you shut it down. The user can start or stop the robot by using keyboards. Also, the user can adjust most of the robot set in <a href="robot_setting.json">jason file</a>.</p>
<p>There might have an intruder showing on the map in a random location(default setting is changing location for every 5 seconds). Besides that, the robot will stop and make noise after it found an intruder in its detecting area. If the intruder is too close to the robot, the robot will use 2x speed escaping on the map.</p>
<p>The robot will continue wandering around, detecting the intruder and recharging itself and it won't be shut down before you press 'q' to quit.</p>
<h2>Installation </h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;git clone https://github.com/earnie08/Security-Robot.git</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cd security-robot</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;docker run -v $PWD:/source -it klavins/elma:latest bash</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;make</div>
</div><!-- fragment --><h2>Execution </h2>
<p>To run the default robot, type </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;bin/robot</div>
</div><!-- fragment --><p> The robot is controlled via the keyboard, via these keys:</p>
<ul>
<li>s: Start or Stop</li>
<li>q: Quit</li>
</ul>
<p>Can switch to customize robot setting. To paste the test case called "SettingFromJson" from unit_test.cc to main.cc and "make" again.</p>
<h2>Testing </h2>
<p>To run tests, do </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;bin/test</div>
</div><!-- fragment --><p>There are three parts of the test case:</p>
<ol type="1">
<li>Default Robot Setting: use the default setting to run the robot</li>
<li>Json file testing: test json file information</li>
<li>Customize Robot Setting: use customize setting to run the robot</li>
</ol>
<h2>Architecture </h2>
<ul>
<li><a href="#mpinfo">Map Information</a> (<a href="mapInfo.h">MapInfo.h</a>)</li>
<li><a href="#battery">Battery Information</a> (<a href="battery.h">Battery.h</a>)</li>
<li><a href="#intruder">Intruder</a> (<a href="intruder.h">Intruder.h</a>)</li>
<li><a href="#robot">Robot</a> (<a href="robot.h">Robot.h</a>)</li>
<li><a href="#ui">Robot Interface</a> (<a href="robot_interface.h">Robot_Interface.h</a>)</li>
<li><a href="#setting">Customize Setting</a> (<a href="setting.h">Setting.h</a>) <hr/>
 <h3>__Map Information__</h3>
</li>
</ul>
<p>Create and set all the position on the 2D array map including robot position 'x', charge station 'C' and intruder position 'I'.</p>
<p>Default map setting: &gt; map size : <b>11*11</b></p>
<p>&gt; initial robot location : __[0,0]__</p>
<p>&gt; charge station location : __[5,5]__</p>
<p>Symbol on the map: &gt; Robot : <b>x</b></p>
<p>&gt; Charge Station : <b>C</b></p>
<p>&gt; Intruder : <b>I</b></p>
<p>The map size, initial robot position and charge station position can be set in the customize json file.</p>
<h3>__Battery__</h3>
<p>Set the battery capacity and set the battery consumption rate. Battery charging speed is depends on the default consumption rate.</p>
<p>Default Battery setting: &gt; Capacity : <b>100</b></p>
<p>&gt; Consume Rate : <b>5</b></p>
<p>The capacity, consume rate can be set in the customize json file.</p>
<h3>__Intruder__</h3>
<p>Intruder class is inherited to elma's process class. The intruder will update it's location every 5 seconds(update time can be changed in main.cc) and stop when user press stop button('s'). The location is randomly.</p>
<h3>__Robot__</h3>
<p>Robot class is inherited to elma's state machine class. In the robot state machine, there are serveral states and functions.</p>
<p>States:</p>
<div class="image">
<img src="images/RobotStateMachine.png"  width="100%"/>
</div>
<ul>
<li>Off (<a href="off.h">off.h</a>): Press 's' to start the robot.</li>
<li>Wander (<a href="wander.cc">wander.cc</a>):<ol type="1">
<li>Detect the intruder's position. If the intruder is in the detection area, set the battery consumption rate to the half of the default rate.</li>
<li>Detect battery status.</li>
<li>The robot will move 1 step each time, the direction is up, left, right and down.</li>
</ol>
</li>
<li>Noise (<a href="noise.cc">noise.cc</a>):<ol type="1">
<li>Detect the intruder's position. If the intruder is out of the detection area, reset the consumption rate, turn off the noise and back to wander state.</li>
<li>Detect whether the intruder is in the proximity area. If true, sett the battery consume rate to 2 times of default rate.</li>
<li>Detect battery status.</li>
<li>Robot stop wandering.</li>
<li>Making noise.</li>
</ol>
</li>
<li>Evade (<a href="evade.cc">evade.cc</a>):<ol type="1">
<li>Detect the intruder's position. If the intruder is out of the proximity area, reset the consumption rate and back to noise state.</li>
<li>Detect battery status.</li>
<li>robot will move 2 steps each time to escape. The direction is random.</li>
</ol>
</li>
<li>Finding (<a href="finding.cc">finding.cc</a>):<ol type="1">
<li>Detect robot is in charge station or not. If it's in the charge station, start charging.</li>
<li>Plan the path to the charge station. The routing logic is that the robot will go x-axis first until it has the same x value as the charge station. If the intruder showed up on the route and it's in front of the robot, the robot will detour or try to go y-axis first. <br />
Examples: <pre class="fragment">| __General__ | __Detour__ | __Y-asix First__ |
|:-----------:|:----------:|:----------------:|
|&lt;img src="images/PathToChargeStation.png"/&gt; | &lt;img src="images/DetourToChargeStation.png"/&gt; | &lt;img src="images/Y-AxisFirstDetour.png"/&gt; |
</pre></li>
</ol>
</li>
<li>Charging (<a href="charging.cc">charging.cc</a>):<ol type="1">
<li>Charging rate is 2 times of the default consume rate.</li>
<li>If the battery is full, set the robot position at the last location.</li>
</ol>
</li>
</ul>
<p>Functions:</p><ul>
<li><b>batteryDetection</b> : Detect whether the battery can support robot go back to charge station. Reserved 2 steps for the robot to avoid it needs to detour.</li>
<li><b>intruderDetection</b> : Detect whether intruder's location is in the detection area, the default is a 4x4 area from the robot's location on the map.</li>
<li><b>proximityDetection</b> : Detect whether intruder's location is too close to the robot, the default is detecting 2x2 area around the robot's location on the map.</li>
</ul>
<h3>__Robot Interface__</h3>
<p>To show the robot introduction, robot status, battery status and map information on terminal. The user can start and stop the robot by using 's' button and press 'q' to quit. Stop button can only be detected when the robot is wandering. Quit button can be pressed in anytime.</p>
<p><b>Default Interface:</b> </p><div class="image">
<img src="images/RobotInterface.png" />
</div>
<p><b>Customize Robot Interface:</b> </p><div class="image">
<img src="images/CustomizeRobotInterface.png" />
</div>
<h3>__Customize Setting__</h3>
<p>Customize setting for the robot.</p>
<p>There are some restriction for customize setting:</p><ul>
<li>Robot Name: should be <b>string</b> type.</li>
<li>Map Size: should be in range <b>5</b> to <b>20</b>. (for the best visualization)</li>
<li>Battery Size: should <b>greater than consume rate</b> and <b>0</b></li>
<li>Battery Consume Rate: should <b>greater than 0</b>.</li>
<li>Charge Station: x and y shold <b>smaller than map size</b> and <b>greater or equal to 0</b>.</li>
<li>Robot Position: x and y shold <b>smaller than map size</b> and <b>greater or equal to 0</b>.</li>
<li>Robot Detection Area: should be <b>smaller or equal to map size</b>.</li>
<li>Robot Detection Area: should be <b>smaller or equal to map size</b>.</li>
</ul>
<p>**Battery size divided to two times consume rate should be smaller than the steps that the robot needs to go back to charge station.</p>
<p>Example: ~~~ { "Robot Name": "Security Robot", "Map Size": 20, "Battery Size": 100, "Battery Consume Rate": 2, "Charge Station": [19,19], "Robot Position": [0,0], "Robot Detection Area": 20, "Robot Proximity Area": 20 } ~~~</p>
<h2>Results </h2>
<p><b>Making Noise:</b></p>
<div class="image">
<img src="images/Noise.png"  width="80%"/>
</div>
<p><b>Evading:</b></p>
<div class="image">
<img src="images/Evading.png"  width="80%"/>
</div>
<p><b>Battery Low:</b></p>
<div class="image">
<img src="images/BatteryLow.png"  width="80%"/>
</div>
<p><b>Charging:</b></p>
<div class="image">
<img src="images/Charging.png"  width="80%"/>
</div>
<h2>Milestones &amp; Progress: </h2>
<ol type="1">
<li>To implement an automatically wandering robot on a 2D array map and also calculate the battery consumption and charging logic into the robot's state machine system. __(2/28-3/7)__</li>
<li>Adding a few features to the robot which can have some action after a randomly dropped intruder on the map. __(2/28-3/7)__</li>
<li>Add customize setting feature. __(3/8-3/13)__</li>
<li>Modify functions to adjust customize setting from JSON file. __(3/8-3/13)__</li>
<li>Transform the robot on the terminal 2D map into the terminal graphic user interface. __(3/14-3/21)__</li>
<li>Completing the API documentation. __(3/14-3/21)__</li>
</ol>
<h2>References </h2>
<ul>
<li>elma : <a href="https://github.com/klavinslab/elma_project">https://github.com/klavinslab/elma_project</a></li>
<li>robot state machine: <a href="https://github.com/klavins/ECEP520/blob/master/week_7/images/robot.png">https://github.com/klavins/ECEP520/blob/master/week_7/images/robot.png</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 21 2019 08:32:46 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
